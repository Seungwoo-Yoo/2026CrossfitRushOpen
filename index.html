<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>2026 CrossFit Open Leaderboard</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Inter', 'Noto Sans KR', sans-serif; background-color: #111827; color: #d1d5db; }
        
        /* íƒ­ ìŠ¤íƒ€ì¼ */
        .tab { transition: all 0.2s ease-in-out; border-bottom: 2px solid transparent; color: #9ca3af; }
        .tab.active { color: #facc15; border-color: #facc15; font-weight: 700; }

        /* ì§€ì  ì„ íƒ ë²„íŠ¼ ìŠ¤íƒ€ì¼ (ëª¨ë°”ì¼ ìµœì í™”) */
        .branch-btn { transition: all 0.2s; opacity: 0.6; filter: grayscale(100%); transform: scale(0.98); }
        .branch-btn.active { opacity: 1; filter: grayscale(0%); transform: scale(1.0); border-color: #facc15; background-color: #374151; box-shadow: 0 0 10px rgba(250, 204, 21, 0.2); }

        .loader { border: 3px solid #4b5563; border-top: 3px solid #facc15; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* íŒ€ ì•„ì´ì½˜ ìŠ¤íƒ€ì¼ (ëª¨ë°”ì¼ì—ì„œ ë” ì‘ê²Œ) */
        .team-icon {
            width: 20px; height: 20px; border-radius: 50%; object-fit: cover;
            margin-left: 4px; vertical-align: middle; display: inline-block;
        }

        /* ğŸ“± ëª¨ë°”ì¼ ì „ìš© í…Œì´ë¸” ì¡°ì • */
        /* [ìˆ˜ì •] ëª¨ë°”ì¼ í…Œì´ë¸” ì—¬ë°± ë° ìŠ¤íƒ€ì¼ ìµœì í™” */
        @media (max-width: 640px) {
            th, td { 
                padding: 0.5rem 0.25rem !important; /* ì¢Œìš° ì—¬ë°±ì„ ë” ì¤„ì„ */
            }
            .team-icon { width: 16px; height: 16px; } 
            h1 { font-size: 1.5rem !important; }
        }

        /* [ì¶”ê°€] ì„±ë³„ í—¤ë” ìƒ‰ìƒ ìŠ¤íƒ€ì¼ */
        .header-male { background-color: rgba(30, 58, 138, 0.5); color: #bfdbfe; } /* ë‚¨ìƒ‰ ê³„ì—´ */
        .header-female { background-color: rgba(131, 24, 67, 0.5); color: #fbcfe8; } /* ë¶„í™ ê³„ì—´ */

        /* ì„±ë³„ ë²„íŠ¼ í™œì„±í™” ìŠ¤íƒ€ì¼ */
        .gender-btn.active {
            background-color: #facc15; /* ë…¸ë€ìƒ‰ */
            color: #111827; /* ì–´ë‘ìš´ ê¸€ì”¨ */
            border-color: #facc15;
            transform: scale(1.05);
        }

        /* í´ë¦­í•´ì„œ ì—´ë¦¬ëŠ” ìƒì„¸ ì •ë³´ í–‰ ìŠ¤íƒ€ì¼ */
        .detail-row {
            background-color: #1f2937; /* ë” ì–´ë‘ìš´ ë°°ê²½ */
            border-bottom: 2px solid #374151;
        }
        .detail-content {
            padding: 10px;
            color: #d1d5db;
            font-size: 0.85rem;
        }
        /* í´ë¦­ ê°€ëŠ¥í•œ í–‰ì— ë§ˆìš°ìŠ¤ ì˜¬ë ¸ì„ ë•Œ */
        .cursor-pointer:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }

    </style>
</head>
<body class="min-h-screen bg-gray-900">
    <div class="container mx-auto px-2 py-4 sm:p-6 lg:p-8 max-w-3xl"> <header class="text-center mb-4">
            <h1 class="text-2xl sm:text-4xl font-bold text-yellow-300 mb-1 leading-tight">
               2026 CrossFit Rush Open Leaderboard
            </h1>
            <h2 id="main-title" class="text-sm sm:text-xl font-medium text-gray-300 mb-4">
                "í¬ë¡œìŠ¤í•ì— ë¯¸ì¹œ ìš°ë¦¬ë“¤ì˜ ì”ì¹˜ë‚ "
            </h2>

            <div class="flex justify-center gap-2 mb-4">
                <button onclick="changeBranch('ì¤‘í™”')" id="btn-ì¤‘í™”" class="branch-btn active flex items-center justify-center gap-2 py-2 px-4 bg-gray-800 rounded-lg border border-gray-700 w-32">
                    <span class="text-lg">ğŸ”¥</span>
                    <span class="font-bold text-white text-sm">ì¤‘í™”ì </span>
                </button>
                <button onclick="changeBranch('êµ°ì')" id="btn-êµ°ì" class="branch-btn flex items-center justify-center gap-2 py-2 px-4 bg-gray-800 rounded-lg border border-gray-700 w-32">
                    <span class="text-lg">ğŸ’ª</span>
                    <span class="font-bold text-white text-sm">êµ°ìì </span>
                </button>
            </div>
        </header>

        <div class="border-b border-gray-700 mb-4 overflow-x-auto">
            <nav class="flex justify-between sm:justify-center min-w-full" aria-label="Tabs">
                <button data-tab="list" class="tab active flex-1 py-2 text-xs sm:text-base text-center whitespace-nowrap">ëª…ë‹¨</button>
                <button data-tab="event1" class="tab flex-1 py-2 text-xs sm:text-base text-center whitespace-nowrap">EV 1</button>
                <button data-tab="event2" class="tab flex-1 py-2 text-xs sm:text-base text-center whitespace-nowrap">EV 2</button>
                <button data-tab="event3" class="tab flex-1 py-2 text-xs sm:text-base text-center whitespace-nowrap">EV 3</button>
                <button data-tab="total" class="tab flex-1 py-2 text-xs sm:text-base text-center whitespace-nowrap">TOTAL</button>
            </nav>
        </div>

        <div id="gender-tabs" class="flex justify-center gap-3 mb-4 hidden">
            <button onclick="changeGender('male')" id="btn-male" class="gender-btn active px-4 py-1.5 rounded-full text-xs sm:text-sm font-bold bg-gray-800 text-gray-400 border border-gray-600 transition-all hover:bg-gray-700">
                ğŸ‹ï¸â€â™‚ï¸ ë‚¨ì (Male)
            </button>
            <button onclick="changeGender('female')" id="btn-female" class="gender-btn px-4 py-1.5 rounded-full text-xs sm:text-sm font-bold bg-gray-800 text-gray-400 border border-gray-600 transition-all hover:bg-gray-700">
                ğŸ‹ï¸â€â™€ï¸ ì—¬ì (Female)
            </button>
        </div>

        <div id="wod-section" class="my-4 text-center hidden">
            <button id="wod-toggle-button" class="bg-yellow-600/90 hover:bg-yellow-600 text-white font-bold py-1.5 px-4 rounded-full text-xs transition-colors duration-200">
                WOD DETAILS â–¼
            </button>
            <div id="wod-content" class="hidden mt-2 p-3 bg-gray-800 rounded-lg text-left text-xs sm:text-sm text-gray-300 whitespace-pre-wrap border border-gray-700 leading-relaxed"></div>
        </div>

        <div id="status" class="h-6 flex items-center justify-center text-xs text-gray-500 mb-2"></div>
        <div id="tableContainer" class="overflow-x-auto min-h-[300px] pb-10"></div>
    </div>

<script>
    // --- ì„¤ì • ë¶€ë¶„ ---
    const API_KEY = 'AIzaSyDVAAXL9Tfcqq_7RsKIVhjBZgboDCved5g'; 
    const SPREADSHEET_ID = '18utoWLAV5n2Wknu-LdgS5rKLVdCQK0XuSrB42D_0RZw'; 
    
    let currentBranch = 'ì¤‘í™”';
    let currentEvent = 'list';
    let currentGender = 'male'; // âœ¨ ì„±ë³„ ìƒíƒœ ì¶”ê°€ (ê¸°ë³¸: ë‚¨ì)
    const REFRESH_INTERVAL = 15000;

    // âœ¨ ë²”ìœ„ ìˆ˜ì •: ë‚¨ì(A~E) + ì—¬ì(F~J)ë¥¼ ëª¨ë‘ ê°€ì ¸ì˜¤ê¸° ìœ„í•´ Jì—´ê¹Œì§€ í™•ì¥
    const SHEET_CONFIG = {
            list:   { prefix: 'ëª…ë‹¨',   range: '!A1:J100', type: 'standard', wodCell: null },
            event1: { prefix: 'Event1', range: '!A1:J100', type: 'standard', wodCell: '!L1' },
            event2: { prefix: 'Event2', range: '!A1:J100', type: 'standard', wodCell: '!L1' },
            event3: { prefix: 'Event3', range: '!A1:J100', type: 'standard', wodCell: '!L1' },
            // âœ¨ Total ë²”ìœ„ í™•ì¥ (A~Tì—´ê¹Œì§€ ê°€ì ¸ì˜´)
            total:  { prefix: 'Total',  range: '!A1:T100', type: 'total_special', wodCell: null }
        };
        
    const tableContainer = document.getElementById('tableContainer');
    const statusDiv = document.getElementById('status');
    const wodSection = document.getElementById('wod-section');
    const wodContent = document.getElementById('wod-content');
    const wodToggleButton = document.getElementById('wod-toggle-button');
    const genderTabs = document.getElementById('gender-tabs'); // âœ¨ ì¶”ê°€

    document.addEventListener('DOMContentLoaded', () => {
        initializeTabs();
        updateGenderTabVisibility(); // ì´ˆê¸° ì„±ë³„ íƒ­ í‘œì‹œ ì—¬ë¶€ ì„¤ì •
        fetchAndDisplayData();
        setInterval(() => fetchAndDisplayData(), REFRESH_INTERVAL);
    });

    function changeBranch(branchName) {
        currentBranch = branchName;
        document.querySelectorAll('.branch-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`btn-${branchName}`).classList.add('active');
        fetchAndDisplayData();
    }

    // âœ¨ ì„±ë³„ ë³€ê²½ í•¨ìˆ˜ ì¶”ê°€
    function changeGender(gender) {
        currentGender = gender;
        
        // ë²„íŠ¼ ìŠ¤íƒ€ì¼ ì—…ë°ì´íŠ¸
        document.querySelectorAll('.gender-btn').forEach(btn => btn.classList.remove('active'));
        document.getElementById(`btn-${gender}`).classList.add('active');
        
        fetchAndDisplayData();
    }

    function initializeTabs() {
        const tabs = document.querySelectorAll('button[data-tab]');
        tabs.forEach(tab => {
            tab.addEventListener('click', () => {
                currentEvent = tab.dataset.tab;
                tabs.forEach(t => t.classList.remove('active'));
                tab.classList.add('active');
                
                updateGenderTabVisibility(); // âœ¨ íƒ­ ë°”ë€” ë•Œ ì„±ë³„ íƒ­ í‘œì‹œ ì—¬ë¶€ ì²´í¬
                fetchAndDisplayData();
            });
        });
        wodToggleButton.addEventListener('click', () => wodContent.classList.toggle('hidden'));
    }

    // âœ¨ ì„±ë³„ íƒ­ ë³´ì´ê¸°/ìˆ¨ê¸°ê¸° ë¡œì§
    function updateGenderTabVisibility() {
        // ëª…ë‹¨(list) íƒ­ì—ì„œëŠ” ì„±ë³„ íƒ­ ìˆ¨ê¹€ (ê¸°ì¡´ ë°©ì‹ëŒ€ë¡œ ì „ì²´ ì¶œë ¥í•œë‹¤ê³  ê°€ì •)
        // Event 1,2,3 ë° Total íƒ­ì—ì„œëŠ” ì„±ë³„ íƒ­ ë³´ì„
        if (currentEvent === 'list') {
            genderTabs.classList.add('hidden');
            wodSection.style.display = 'none';
        } else {
            genderTabs.classList.remove('hidden');
            if (currentEvent === 'total') {
                wodSection.style.display = 'none';
            } else {
                wodSection.style.display = 'block';
                wodContent.classList.add('hidden');
            }
        }
    }

    async function fetchAndDisplayData() {
        showLoading();
        const config = SHEET_CONFIG[currentEvent];
        if (!config) return;
        const sheetName = `${config.prefix}_${currentBranch}`;
        
        try {
            // ë°ì´í„° ì „ì²´(A~J) ê°€ì ¸ì˜¤ê¸°
            const rawData = await fetchData(`'${sheetName}'${config.range}`);
            
            // WOD ì„¤ëª… ê°€ì ¸ì˜¤ê¸°
            if (config.wodCell) {
                try {
                    const wodRes = await fetchData(`'${sheetName}'${config.wodCell}`);
                    wodContent.textContent = wodRes?.[0]?.[0] || "WOD ì„¤ëª… ì—†ìŒ";
                } catch (e) { wodContent.textContent = ""; }
            }

            if (rawData && rawData.length > 0) {
                let displayData = [];

                // âœ¨ [í•µì‹¬] ì„±ë³„ì— ë”°ë¼ ë°ì´í„° ìë¥´ê¸° (Slicing)
                // ëª…ë‹¨(list) íƒ­ì€ ì„±ë³„ êµ¬ë¶„ ì—†ì´ ì „ì²´ë¥¼ ë³´ì—¬ì¤€ë‹¤ë©´ rawData ê·¸ëŒ€ë¡œ ì‚¬ìš©
                // Event/Total íƒ­ì€ ì„±ë³„ì— ë”°ë¼ ìë¦„
                // âœ¨ [ìˆ˜ì •ë¨] ì„±ë³„ ë° íƒ­ì— ë”°ë¼ ë°ì´í„° ìë¥´ê¸°
                if (currentEvent === 'list') {
                    displayData = rawData; 
                } else if (currentEvent === 'total') {
                    if (currentGender === 'male') {
                        // ë‚¨ì Total: A~Iì—´ (0~8 ì¸ë±ìŠ¤, ì´ 9ê°œ)
                        displayData = rawData.map(row => row.slice(0, 9));
                    } else {
                        // ì—¬ì Total: K~Sì—´ (10~18 ì¸ë±ìŠ¤, ì´ 9ê°œ) - Jì—´(9)ì€ ë¹ˆì¹¸ì´ë¯€ë¡œ ê±´ë„ˆëœ€
                        displayData = rawData.map(row => row.slice(10, 19));
                    }
                } else {
                    // Event 1, 2, 3
                    if (currentGender === 'male') displayData = rawData.map(row => row.slice(0, 5));
                    else displayData = rawData.map(row => row.slice(5, 10));
                }

                // ì˜ë¼ë‚¸ ë°ì´í„°ê°€ ë¹„ì–´ìˆëŠ” í–‰ ì œê±°
                displayData = displayData.filter(row => row.some(c => c && c.trim() !== ''));

                if (displayData.length > 0) {
                    if (config.type === 'total_special') renderTotalSpecial(displayData);
                    else renderStandardTable(displayData);
                    
                    const genderText = (currentEvent !== 'list') ? (currentGender === 'male' ? '[ë‚¨ì]' : '[ì—¬ì]') : '';
                    updateStatus(`ì—…ë°ì´íŠ¸: ${new Date().toLocaleTimeString()} (${currentBranch} ${genderText})`);
                } else {
                    displayError(`ë°ì´í„° ì—†ìŒ (${sheetName})`);
                }
            } else {
                displayError(`ë°ì´í„° ì—†ìŒ (${sheetName})`);
            }
        } catch (error) {
            console.error(error);
            displayError("ë¶ˆëŸ¬ì˜¤ê¸° ì‹¤íŒ¨");
        }
    }

    async function fetchData(range) {
        const url = `https://sheets.googleapis.com/v4/spreadsheets/${SPREADSHEET_ID}/values/${encodeURIComponent(range)}?key=${API_KEY}`;
        const res = await fetch(url);
        const json = await res.json();
        if (json.error) throw new Error(json.error.message);
        return json.values;
    }

    // ... (renderStandardTable, renderTotalSpecial, getTeamImageHtml, showLoading ë“± ê¸°ì¡´ í•¨ìˆ˜ëŠ” ê·¸ëŒ€ë¡œ ìœ ì§€) ...
    // ì•„ë˜ì— ê¸°ì¡´ render í•¨ìˆ˜ë“¤ì„ ê·¸ëŒ€ë¡œ ë‘ì‹œë©´ ë©ë‹ˆë‹¤.
    
    function renderStandardTable(data) {
        // (ì´ì „ì— ìˆ˜ì •í•´ë“œë¦° í•¨ìˆ˜ ë‚´ìš© ê·¸ëŒ€ë¡œ ì‚¬ìš©)
        tableContainer.innerHTML = '';
        const table = document.createElement('table');
        table.className = "w-full divide-y divide-gray-700 text-xs sm:text-sm table-fixed"; 
        
        const thead = document.createElement('thead');
        thead.className = "bg-gray-800";

        if (currentEvent === 'list') {
            const superRow = document.createElement('tr');
            const superTh = document.createElement('th');
            superTh.colSpan = data[0].length; 
            superTh.textContent = "ì°¸ì—¬ëª…ë‹¨";
            superTh.className = "py-3 text-center text-base sm:text-lg font-bold text-yellow-400 border-b border-gray-700";
            superRow.appendChild(superTh);
            thead.appendChild(superRow);
        }

        const headerRow = document.createElement('tr');
        const headers = data[0]; 
        headers.forEach((text, idx) => {
            const th = document.createElement('th');
            let headerText = text;
            let headerClass = "py-2 px-1 text-center font-semibold text-gray-200 tracking-tight break-words";

            if (text.includes('ë‚¨')) { headerText = 'ğŸ‹ï¸â€â™‚ï¸ ' + text; headerClass += " header-male"; } 
            else if (text.includes('ì—¬')) { headerText = 'ğŸ‹ï¸â€â™€ï¸ ' + text; headerClass += " header-female"; }

            if (currentEvent === 'list' && idx === 1) { headerClass += " border-r-2 border-gray-600"; }

            th.className = headerClass;
            th.innerHTML = headerText;
            headerRow.appendChild(th);
        });
        thead.appendChild(headerRow);

        const tbody = document.createElement('tbody');
        tbody.className = "divide-y divide-gray-800";

        for (let i = 1; i < data.length; i++) {
            const row = data[i];
            if (!row.some(c => c && c.trim() !== '')) continue;

            const tr = document.createElement('tr');
            tr.className = `${(i % 2 === 0) ? 'bg-gray-800/50' : 'bg-transparent'} hover:bg-white/10`;

            for (let j = 0; j < headers.length; j++) {
                const cell = row[j] || ''; 
                const td = document.createElement('td');
                let tdClass = "px-1 py-3 text-center text-gray-300 whitespace-nowrap overflow-hidden text-ellipsis";

                if (currentEvent === 'list' && j === 1) { tdClass += " border-r-2 border-gray-600"; }
                
                td.className = tdClass;
                let content = cell;
                if (content === '') content = '&nbsp;';

                if (currentEvent !== 'list' && j === 0) { 
                    const rank = cell.trim();
                    if (rank === '1') content = '<span class="text-base">ğŸ¥‡</span>';
                    else if (rank === '2') content = '<span class="text-base">ğŸ¥ˆ</span>';
                    else if (rank === '3') content = '<span class="text-base">ğŸ¥‰</span>';
                }

                td.innerHTML = content;
                tr.appendChild(td);
            }
            tbody.appendChild(tr);
        }
        table.appendChild(thead);
        table.appendChild(tbody);
        tableContainer.appendChild(table);
    }
    
    function renderTotalSpecial(data) {
            tableContainer.innerHTML = '';
            const table = document.createElement('table');
            table.className = "w-full text-xs sm:text-sm table-fixed border-collapse"; // border-collapse ì¶”ê°€

            const thead = document.createElement('thead');
            thead.className = "bg-gray-800 text-gray-200";
            
            // âœ¨ í—¤ë”ëŠ” ê¹”ë”í•˜ê²Œ 3ê°œë§Œ!
            thead.innerHTML = `
                <tr>
                    <th class="py-3 w-[15%] text-center font-semibold">ìˆœìœ„</th>
                    <th class="py-3 w-[60%] text-center font-semibold">ì´ë¦„</th>
                    <th class="py-3 w-[25%] text-center font-semibold">Total ì ìˆ˜</th>
                </tr>
            `;
            table.appendChild(thead);

            const tbody = document.createElement('tbody');
            tbody.className = "divide-y divide-gray-800";

            // ë°ì´í„° ë°˜ë³µ (1í–‰ë¶€í„° ì‹œì‘)
            for (let i = 1; i < data.length; i++) {
                const row = data[i];
                if (!row[1] || row[1] === '') continue; // ì´ë¦„ ì—†ìœ¼ë©´ íŒ¨ìŠ¤

                // ë°ì´í„° ì¶”ì¶œ
                const rank = row[0] || '-';
                const name = row[1] || '';
                const score = row[2] || '0';
                
                // ìƒì„¸ ë°ì´í„° (Event 1, 2, 3)
                const e1_rank = row[3], e1_rec = row[4];
                const e2_rank = row[5], e2_rec = row[6];
                const e3_rank = row[7], e3_rec = row[8];

                // ğŸ¥‡ ë©”ë‹¬ ì²˜ë¦¬
                let rankDisplay = `<span class="text-gray-300 font-bold">${rank}</span>`;
                if(rank === '1') rankDisplay = '<span class="text-lg">ğŸ¥‡</span>';
                else if(rank === '2') rankDisplay = '<span class="text-lg">ğŸ¥ˆ</span>';
                else if(rank === '3') rankDisplay = '<span class="text-lg">ğŸ¥‰</span>';

                // --- [1] ë©”ì¸ í–‰ (í•­ìƒ ë³´ì„) ---
                const mainTr = document.createElement('tr');
                mainTr.className = "cursor-pointer transition-colors border-b border-gray-800 h-14";
                mainTr.onclick = () => toggleDetail(i); // í´ë¦­ ì´ë²¤íŠ¸ ì—°ê²°

                mainTr.innerHTML = `
                    <td class="text-center py-2">${rankDisplay}</td>
                    <td class="text-center py-2 font-medium text-white">
                        <div class="flex items-center justify-center gap-1">
                            ${name} <span class="text-[10px] text-gray-500">â–¼</span>
                        </div>
                    </td>
                    <td class="text-center py-2 font-bold text-yellow-400 text-base">${score}</td>
                `;

                // --- [2] ìƒì„¸ í–‰ (í‰ì†Œì—” ìˆ¨ê¹€ class="hidden") ---
                const detailTr = document.createElement('tr');
                detailTr.id = `detail-${i}`;
                detailTr.className = "hidden detail-row"; // ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€

                detailTr.innerHTML = `
                    <td colspan="3">
                        <div class="detail-content grid grid-cols-3 gap-2 text-center">
                            <div class="bg-gray-800/50 rounded p-2 border border-gray-700">
                                <div class="text-yellow-500 font-bold text-[10px] sm:text-xs mb-1">Event 1</div>
                                <div class="text-white font-bold">${e1_rank === '100' ? '-' : e1_rank + 'ë“±'}</div>
                                <div class="text-gray-400 text-[10px]">(${e1_rec})</div>
                            </div>
                            <div class="bg-gray-800/50 rounded p-2 border border-gray-700">
                                <div class="text-yellow-500 font-bold text-[10px] sm:text-xs mb-1">Event 2</div>
                                <div class="text-white font-bold">${e2_rank === '100' ? '-' : e2_rank + 'ë“±'}</div>
                                <div class="text-gray-400 text-[10px]">(${e2_rec})</div>
                            </div>
                            <div class="bg-gray-800/50 rounded p-2 border border-gray-700">
                                <div class="text-yellow-500 font-bold text-[10px] sm:text-xs mb-1">Event 3</div>
                                <div class="text-white font-bold">${e3_rank === '100' ? '-' : e3_rank + 'ë“±'}</div>
                                <div class="text-gray-400 text-[10px]">(${e3_rec})</div>
                            </div>
                        </div>
                    </td>
                `;

                tbody.appendChild(mainTr);
                tbody.appendChild(detailTr);
            }
            
            table.appendChild(thead);
            table.appendChild(tbody);
            tableContainer.appendChild(table);
        }

        // âœ¨ í† ê¸€ í•¨ìˆ˜ ì¶”ê°€ (script íƒœê·¸ ì•ˆ, ë‹¤ë¥¸ í•¨ìˆ˜ë“¤ ì˜†ì— ì¶”ê°€í•˜ì„¸ìš”)
        function toggleDetail(index) {
            const detailRow = document.getElementById(`detail-${index}`);
            if (detailRow.classList.contains('hidden')) {
                detailRow.classList.remove('hidden');
            } else {
                detailRow.classList.add('hidden');
            }
        }


    function showLoading() { statusDiv.innerHTML = '<div class="loader mx-auto"></div>'; }
    function updateStatus(msg) { statusDiv.innerHTML = msg; }
    function displayError(msg) { statusDiv.innerHTML = `<span class="text-red-400">${msg}</span>`; tableContainer.innerHTML = ''; }
</script>
</body>
</html>
